<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<link href="exports.css" rel='stylesheet'>
<link href="exports.css" rel='stylesheet'>

</head>
<body>
<div id='wrap'>
<div id='header'>
<h1>Random tech links</h1>
<h2>
This is an archived post
</h2>
</div>
<div id='content'><div id='nav'>
<a href="web-inspector-based-node-js-debugger">Previous</a>
&nbsp; 
<a href="index-16">Index</a>
&nbsp; 
<a href="coming-home-to-vim">Next</a>
</div>
<div class='post'>
<div class='post_header'>
<h3>Coroutines in C, Duff's device and Protothreads</h3>
<div class='post_info'>
<span class='post_time'>September 25 2010,  8:25 AM</span>
<span class='author'>&nbsp;by Alexey Shamrin</span>
</div>
</div>
<div class='post_body'><p>All this craziness was started with Duff&rsquo;s device:</p>

<ul>
<li>first Tom Duff&rsquo;s <a href="http://groups.google.com/group/net.lang.c/msg/66008138e07aa94c">post to net.lang.c</a>,</li>
<li>his later <a href="http://groups.google.com/group/comp.lang.c/msg/bb78298175c42411?">explaination in comp.lang.c</a>,</li>
<li>Wikipedia <a href="http://en.wikipedia.org/wiki/Duff's_device">article on Duff&rsquo;s device</a>.</li>
</ul>


<p>Continued with Simon Tatham&rsquo;s Coroutines in C hack:</p>

<ul>
<li><a href="http://www.chiark.greenend.org.uk/~sgtatham/coroutines">http://www.chiark.greenend.org.uk/~sgtatham/coroutines.html</a></li>
<li>with a remark on PuTTY&rsquo;s SSH implementation:</li>
</ul>


<blockquote class="posterous_medium_quote"><p>PuTTY is a Win32 Telnet and SSH client. The SSH protocol code contains real-life use of this coroutine trick. As far as I know, this is the worst piece of C hackery ever seen in serious production code.</p></blockquote>

<p>Finally, this trick was used by Adam Dunkels in a <a href="http://twitter.com/diveintomark/status/24804897241">real</a> <a href="http://www.sics.se/contiki/">operating
system</a> for embedded devices:</p>

<ul>
<li><a href="http://www.sics.se/~adam/pt/">Protothreads &ndash; Lightweight, Stackless Threads in C</a></li>
</ul></div>
<div class='post_responses'>
<h4>611 views and 0 responses</h4>
<ul class='post_responses list'>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
